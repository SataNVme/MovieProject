<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<<<<<<< HEAD
<th:block th:replace="~{/include/layout :: setContent( ~{:: .credit} ) }">
<body>
   <!-- jQuery -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <!-- iamport.payment.js -->
    <script type="text/javascript" src="https://cdn.iamport.kr/js/iamport.payment-1.2.0.js"></script>
    <div>
        <h2>IAMPORT 결제</h2>
            <li>
                <button id="iamportPayment" type="button">영화 구매</button>
            </li>
    </div>
</body>
</th:block>
<script>
    $(document).ready(function() {
        $("#iamportPayment").click(function() {
        payment(); // 버튼 클릭시 호출    
        });
    });
// 버튼 클릭하면 실행
function payment(data) {    
    IMP.init('imp53699217'); // 아임포트 관리자 콘솔에서 확인한 '가맹점 식별코드' 입력
    IMP.request_pay({ // param
        pg : "kakaopay.TC0ONETIME", // pg사명 or pg사명.CID(잘못 입력한 경우, 기본 PG사가 띄워짐)
        pay_method : "card", // 지불 방법
        merchant_uid : "iamport_test_id", // 가맹점 주문 번호(아임포트를 사용하는 가맹점에서 중복되지 않은 임의의 문자열을 입력)
        name : "이상한 나라의 수학자", // 결제창에 노출될 상품명
        amount : 10000, // 금액
=======
<!-- jQuery -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <!-- iamport.payment.js -->
    <script type="text/javascript" src="https://cdn.iamport.kr/js/iamport.payment-1.2.0.js"></script>
    
<th:block th:replace="~{/include/layout :: setContent( ~{:: .buy} ) }">
    <div class="buy">
        <h2>IAMPORT 결제</h2>
        <button id="iamportPayment" type="button">영화 결제</button>
    </div>
</th:block>
<script>
    var IMP = window.IMP;
    IMP.init('imp53699217'); // 아임포트 관리자 콘솔에서 확인한 '가맹점 식별코드' 입력
    IMP.request_pay({ // param
        pg : "kakaopay.TC0ONETIME", // pg사명 or pg사명.CID(잘못 입력한 경우, 기본 PG사가 띄워짐)
        // pg : 'kakao',
        pay_method : "card", // 지불 방법
        // merchant_uid : "iamport_test_id", // 가맹점 주문 번호(아임포트를 사용하는 가맹점에서 중복되지 않은 임의의 문자열을 입력)
        merchant_uid : 'merchant_' + new Date().getTime(),
        name : "이상한 나라의 수학자", // 결제창에 노출될 상품명
        amount : 100, // 금액
>>>>>>> 13afea391c59459e24f216ee29cb0800a79dfc66
        buyer_email : "dahbs157@hanmail.net",
        buyer_name : "남태희",
        buyer_tel : "01071588434"
    }, function(rsp) { // callback
        if(rsp.success) {
<<<<<<< HEAD
            alert("완료 -> imp_uid : "+ rsp.imp_uid + " / merchant_uid(orderKey) : " + rsp.merchant_uid);
        } else {
            alert("실패 : 코드("+ rsp.error_code +") / 메시지("+ rsp.error_msg +")");
        }
    });
}    
</script>    
=======
            var msg = "결제가 완료되었습니다.";
            msg = "고유 ID : " + rsp.imp_uid;
            msg = "상점 거래 ID : " + rsp.merchant_uid;
            msg = "결제 금액 : " + rsp.paid_amount;
            msg = "카드 승인번호 : " + rsp.apply_num;
            location.href ="/movie/movieDetail";
        } else {
            var msg = "결제에 실패하였습니다.";
            msg += "에러 내용 : " + rsp.error_msg;
        }
        alert(msg);
    });
</script>          
>>>>>>> 13afea391c59459e24f216ee29cb0800a79dfc66
</html>