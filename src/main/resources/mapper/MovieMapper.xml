<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0 //EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.project2.movieproject.movieDetail.MovieMapper">
	<select id="getDetail" resultType="MovieVO">
		select * from movie
		where movie_koficCd = #{movie_koficCd}  
	</select>
	<select id="getList_ko" resultType="MovieVO">
		select * from movie
		where movie_gr = #{genre} and movie_nt = "한국"
	</select>
	<select id="getList_out" resultType="MovieVO">
		select * from movie
		where movie_gr = #{genre} and movie_nt != "한국"
	</select>
	<insert id="addStarRate" >
		insert into star_rate (user_key,
							   movie_koficCd,
							   sr_rate)
		values(#{user_key},
			   #{movie_koficCd},
			   #{sr_rate})		
	</insert>
	<select id="getStarRate" resultType="Float">
	
		select round(avg(sr_rate),1) 
		from star_rate 
		where movie_koficCd=#{movie_koficCd};
	
	</select>
	
</mapper>