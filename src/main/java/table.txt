CREATE TABLE MOVIE (
    MOVIE_KOFICCD VARCHAR(15) NOT NULL, ##영진위KEY
    MOVIE_TMDBCD VARCHAR(15) NOT NULL, ##TMDBKEY
    MOVIE_NM VARCHAR(50) NOT NULL, ##영화이름(한글)
    MOVIE_NMEN VARCHAR(50) NOT NULL, ##영화이름(영어)
    MOVIE_VURL VARCHAR(100), ##동영상URL
    MOVIE_IURL VARCHAR(100) NOT NULL, ##이미지URL
    MOVIE_AGE VARCHAR(50) NOT NULL, ##나이등급
    MOVIE_DIRNM VARCHAR(50) NOT NULL, ##감독이름(한글)
    MOVIE_ACTNM VARCHAR(300) NOT NULL, ##배우이름(한글)
    MOVIE_GR VARCHAR(30) NOT NULL, ##영화장르
    MOVIE_NT VARCHAR(20) NOT NULL, ##제작국가
    MOVIE_OPENDT VARCHAR(10) NOT NULL, ##개봉일
    MOVIE_TIME VARCHAR(10) NOT NULL,  ##상영시간
    MOVIE_TAGLINE VARCHAR(100) NOT NULL, #명대사
    MOVIE_OV VARCHAR(1000) NOT NULL, ##영화소개
    MOVIE_SELLPRICE INT, ##판매가격
    MOVIE_RENTPRICE INT, ##대여가격
    MOVIE_VIEWS INT, ## 조회수
    MOVIE_LIKE INT, ## 관심수
    MOVIE_RECOMMEND INT, ## 추천수 
    PRIMARY KEY(MOVIE_KOFICCD)
);

CREATE TABLE USER (
   user_id      VARCHAR(20)   PRIMARY KEY,
   user_gender   INT   NOT NULL,
   user_birth   VARCHAR(20) NOT NULL,
   user_email   VARCHAR(50)   NOT NULL,
   user_auth   BOOLEAN   DEFAULT FALSE,
   user_date   TIMESTAMP DEFAULT NOW(),
   user_admin   BOOLEAN   DEFAULT FALSE,
    user_name   VARCHAR(10) NOT NULL,
    user_phone  VARCHAR(15) NOT NULL,
    user_password VARCHAR(20) NOT NULL
);

CREATE TABLE QA (
   qa_key      INT   PRIMARY KEY AUTO_INCREMENT,
   user_id      VARCHAR(20)   NOT NULL, ##FK
   qa_title   VARCHAR(20)   NOT NULL,
   qa_content   VARCHAR(5000)   NOT NULL,
   qa_date      TIMESTAMP DEFAULT NOW(),
    qa_comment   VARCHAR(5000),
   FOREIGN KEY(user_id)
   REFERENCES USER(user_id)
);

CREATE TABLE QA_COMMENT (
   qa_key   INT   PRIMARY KEY AUTO_INCREMENT,
   user_key   INT NOT NULL, ##FK
   qa_comment   VARCHAR(5000)   NOT NULL
);

CREATE TABLE ADMIN_NOTICES(
ADMIN_KEY INT PRIMARY KEY AUTO_INCREMENT,
NOTICES_TITLE VARCHAR(20) NOT NULL,
NOTICES_DATE TIMESTAMP DEFAULT NOW(),
USER_ADMIN BOOLEAN DEFAULT FALSE,
NOTICES_COUNT INT NOT NULL,
NOTICES_CONTENT VARCHAR(200) NOT NULL
FILENAME VARCHAR(200),
FILEPATH VARCHAR(200),
UUID VARCHAR(200)
);

CREATE TABLE PRODUCT_UPLOAD(
   UPLOAD_NO INT PRIMARY KEY AUTO_INCREMENT, # PK
    FILENAME VARCHAR(100) NOT NULL, #실제 파일명
    FILEPATH VARCHAR(100) NOT NULL, #220407형태의 폴더명
    UUID VARCHAR(50) NOT NULL,       #파일이름앞에 들어가는 랜덤값
    REGDATE TIMESTAMP DEFAULT NOW(),
   USER_ID INT, ## FK
    USER_ADMIN VARCHAR(20) ##FK(편의성을 위한 FK)
);


CREATE TABLE comment (
  comment_key int NOT NULL AUTO_INCREMENT,
  user_id varchar(20) DEFAULT NULL,
  comment_com varchar(300) NOT NULL,
  comment_rank int NOT NULL,
  comment_date timestamp NOT NULL,
  comment_date date DEFAULT NULL,
  comment_class int NOT NULL,
  comment_group int NOT NULL,
  comment_sort int NOT NULL,
  comment_like int NOT NULL,
  comment_unlike int NOT NULL,
  comment_mn int NOT NULL,
  PRIMARY KEY (comment_key),
  KEY user_id (user_id),
  CONSTRAINT comment_ibfk_1 FOREIGN KEY (user_id) REFERENCES user (user_id)
);

CREATE TABLE SEARCH (  
	MOVIE_KOFICCD VARCHAR(15) NOT NULL, ##영진위KEY
	MOVIE_NM VARCHAR(50) NOT NULL, ##영화이름(한글)
	MOVIE_DIRNM VARCHAR(50) NOT NULL, ##감독이름(한글)
    MOVIE_ACTNM VARCHAR(300) NOT NULL, ##배우이름(한글)
	MOVIE_OV VARCHAR(1000) NOT NULL, ##영화소개
    PRIMARY KEY(MOVIE_KOFICCD)
);  
